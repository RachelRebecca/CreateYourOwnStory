<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Title Page</title>
    <link href="css/normalize.css" rel="stylesheet">
    <link href="img/favicon.ico" rel="icon">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" media='all'
          integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
            integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
            crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <link rel="stylesheet" href="//code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet"
          type="text/css">
    <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
    <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>
    <link href="css/main.css" rel="stylesheet">
</head>
<body>

<div class="container" id="mainContents">
    <div class="card imageCard" style="background-color: rgba(0, 0, 0, .1); box-shadow: 0 0 15px 0">
        <div class="card-body text-center">
            <h1 class="card-title" id="titleCard"></h1>
            <script>
                let title = sessionStorage.getItem("titleName");
                title = title === null ? "An Awesome Title Goes Here" : title;
                document.getElementById("titleCard").innerText = title;
            </script>
            <div class="titleImage">
                <img id="uploadedTitle" src="" alt="profile image" onerror="err()">
                <script>
                    let uploadedTitle = $("#uploadedTitle");
                    let x = sessionStorage.getItem("coverImage");
                    x = (x === null ? "img/logo.png" : x);
                    uploadedTitle.attr("src", x);

                    function err()
                    {
                        uploadedTitle.attr("src", "img/logo.png");
                        alert("The system was unable to restore the image. Using default image.");
                    }
                </script>
            </div>
        </div>
    </div>
</div>

<hr id="title-divider">
<form>
    <input type="button" id="printTitlePageButton" onclick="printProfilePage()" value="Print Page">
    <input type="button" id="returnToCreateTitlePageButton" onclick="returnToCreateTitlePage()" value="Go Back">
    <input type="button" id="writeStoryButton" onclick="returnToWriteStoryPage()" value="Start Writing Story">
</form>

<style media="print">
    body {
        -webkit-print-color-adjust: inherit;
        -webkit-filter: drop-shadow(0 0 15px);
    }
</style>
<script>
    function printProfilePage()
    {
        let hr = document.getElementById("title-divider");
        let printButton = document.getElementById("printTitlePageButton");
        let returnButton = document.getElementById("returnToCreateTitlePageButton");
        let writeStoryButton = document.getElementById("writeStoryButton");

        setVisibility(hr, 'hidden');
        setVisibility(printButton, 'hidden');
        setVisibility(returnButton, 'hidden');
        setVisibility(writeStoryButton, 'hidden');

        window.print()

        setVisibility(hr, 'visible');
        setVisibility(printButton, 'visible');
        setVisibility(returnButton, 'visible');
        setVisibility(writeStoryButton, 'visible');
    }

    function setVisibility(element, visibility)
    {
        element.style.visibility = visibility;
    }

    function returnToCreateTitlePage()
    {
        location.href = "generateTitle.html";
    }

    function returnToWriteStoryPage()
    {
        location.href = "writeStory.html";
    }
</script>
</body>
</html>